{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.0-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/itinerary-generation.ts"],"sourcesContent":["// use server'\n\n/**\n * @fileOverview Generates a personalized travel itinerary based on the destination and preferences.\n *\n * - generateItinerary - A function that generates a travel itinerary.\n * - GenerateItineraryInput - The input type for the generateItinerary function.\n * - GenerateItineraryOutput - The return type for the generateItinerary function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\nimport type { CrowdType } from '@/lib/types';\n\nconst GenerateItineraryInputSchema = z.object({\n  destination: z.string().describe('The destination for the travel itinerary.'),\n  preferences: z.string().describe('The user preferences for the travel itinerary, e.g., interests, budget, travel style.'),\n  crowdType: z.string().describe(\"The type of crowd traveling (e.g., solo, couple, family, friends, business).\") as z.ZodType<CrowdType>,\n  isDayTrip: z.boolean().describe(\"Whether the trip is a single day trip.\"),\n  startDate: z.string().describe(\"The start date of the trip in YYYY-MM-DD format.\"),\n  endDate: z.string().optional().describe(\"The end date of the trip in YYYY-MM-DD format. This will be absent if it's a day trip or if isDayTrip is true.\"),\n});\nexport type GenerateItineraryInput = z.infer<typeof GenerateItineraryInputSchema>;\n\nconst GenerateItineraryOutputSchema = z.object({\n  itinerary: z.string().describe('The generated travel itinerary, formatted as Markdown. Use headings, lists, bold text, etc., to make it readable and engaging.'),\n  suggestedLocations: z.array(z.string().describe(\"A key location, landmark, or address name mentioned in the itinerary that can be plotted on a map. This should be a specific place name or address suitable for geocoding, e.g., 'Eiffel Tower, Paris' or '1600 Amphitheatre Parkway, Mountain View, CA'. Do not include generic terms like 'local markets'.\")).min(1).max(10).describe(\"An array of 1 to 10 key location names or addresses from the itinerary, suitable for plotting on a map.\"),\n});\nexport type GenerateItineraryOutput = z.infer<typeof GenerateItineraryOutputSchema>;\n\nexport async function generateItinerary(input: GenerateItineraryInput): Promise<GenerateItineraryOutput> {\n  return generateItineraryFlow(input);\n}\n\nconst generateItineraryPrompt = ai.definePrompt({\n  name: 'generateItineraryPrompt',\n  input: {schema: GenerateItineraryInputSchema},\n  output: {schema: GenerateItineraryOutputSchema},\n  prompt: `You are a travel expert. Generate a personalized travel itinerary.\n\nDestination: {{{destination}}}\nTraveler Profile Details:\n- Crowd Type: {{crowdType}} (Interpret 'family' as including children. For other types, phrase naturally, e.g., 'a solo traveler' or 'a couple').\nTrip Duration:\n{{#if isDayTrip}}\nThis is a day trip on {{startDate}}.\n{{else}}\nThe trip is from {{startDate}} to {{endDate}}.\n{{/if}}\nUser Preferences: {{{preferences}}}\n\nProvide a detailed itinerary based on this information. **Format the itinerary using Markdown** (e.g., using # for headings, - or * for bullet points, **bold text** for emphasis). Ensure the output is engaging, practical, and well-structured.\n\nAfter the itinerary, list up to 10 key locations, landmarks, or specific addresses mentioned in the itinerary that would be suitable for plotting on a map. These locations should be specific and geocodable (e.g., \"Louvre Museum, Paris\", \"Golden Gate Bridge, San Francisco\", \"221B Baker Street, London\"). Do not include generic terms like \"a local restaurant\" or \"the beach\".\n\nItinerary:\n[Generate the Markdown itinerary here]\n\nSuggested Locations for Map:\n[List the suggested locations here, one per line, to be extracted into the suggestedLocations array output field. Ensure these are specific and geocodable.]\n`,\n});\n\nconst generateItineraryFlow = ai.defineFlow(\n  {\n    name: 'generateItineraryFlow',\n    inputSchema: GenerateItineraryInputSchema,\n    outputSchema: GenerateItineraryOutputSchema,\n  },\n  async input => {\n    const {output} = await generateItineraryPrompt(input);\n    return output!;\n  }\n);"],"names":[],"mappings":"AAAA,cAAc;AAEd;;;;;;CAMC;;;AAED;AACA;AAAA;;;AAGA,MAAM,+BAA+B,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC5C,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACjC,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACjC,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC/B,WAAW,uIAAA,CAAA,IAAC,CAAC,OAAO,GAAG,QAAQ,CAAC;IAChC,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC/B,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;AAC1C;AAGA,MAAM,gCAAgC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC7C,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC/B,oBAAoB,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,iTAAiT,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,QAAQ,CAAC;AAC3X;AAGO,eAAe,kBAAkB,KAA6B;IACnE,OAAO,sBAAsB;AAC/B;AAEA,MAAM,0BAA0B,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC9C,MAAM;IACN,OAAO;QAAC,QAAQ;IAA4B;IAC5C,QAAQ;QAAC,QAAQ;IAA6B;IAC9C,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;;AAsBX,CAAC;AACD;AAEA,MAAM,wBAAwB,mHAAA,CAAA,KAAE,CAAC,UAAU,CACzC;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,wBAAwB;IAC/C,OAAO;AACT","debugId":null}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { generateItinerary } from '@/ai/flows/itinerary-generation';\nimport type { GenerateItineraryInput as AIItineraryInput, GenerateItineraryOutput } from '@/ai/flows/itinerary-generation'; // Renamed to avoid conflict\nimport { updateItineraryForUser } from '@/lib/firebase/firestore';\nimport type { ItineraryData, ItineraryGenerationInput } from '@/lib/types';\n\nconst mockWeathers = [\n  \"Sunny, 28°C. Gentle breeze.\",\n  \"Partly cloudy, 22°C. Chance of rain: 10%.\",\n  \"Cloudy, 19°C. Light showers expected in the evening.\",\n  \"Clear skies, 30°C. Perfect beach weather!\",\n  \"Windy, 20°C. Bring a jacket.\",\n];\n\nfunction getRandomWeather(): string {\n  return mockWeathers[Math.floor(Math.random() * mockWeathers.length)];\n}\n\nexport async function runGenerateItineraryAction(\n  input: ItineraryGenerationInput // This type comes from @/lib/types\n): Promise<{ data?: ItineraryData; error?: string }> {\n  try {\n    // The AI flow expects AIItineraryInput which matches structure but might have different Zod specifics\n    const aiInput: AIItineraryInput = {\n      destination: input.destination,\n      preferences: input.preferences,\n      crowdType: input.crowdType,\n      startDate: input.startDate,\n      endDate: input.isDayTrip ? undefined : input.endDate, // Ensure endDate is undefined for day trips for the AI\n      isDayTrip: input.isDayTrip,\n    };\n\n    const result: GenerateItineraryOutput = await generateItinerary(aiInput);\n    \n    if (result.itinerary && result.suggestedLocations) {\n      const itineraryData: ItineraryData = {\n        id: new Date().toISOString(),\n        destination: input.destination,\n        preferences: input.preferences,\n        itinerary: result.itinerary,\n        weather: getRandomWeather(),\n        createdAt: new Date().toISOString(),\n        crowdType: input.crowdType,\n        startDate: input.startDate,\n        endDate: input.isDayTrip ? undefined : input.endDate,\n        isDayTrip: input.isDayTrip,\n        suggestedLocations: result.suggestedLocations, // Added\n      };\n      return { data: itineraryData };\n    }\n    return { error: \"Failed to generate itinerary content or suggested locations.\" };\n  } catch (e) {\n    console.error(\"Error generating itinerary:\", e);\n    const errorMessage = e instanceof Error ? e.message : \"An unknown error occurred during itinerary generation.\";\n    return { error: errorMessage };\n  }\n}\n\nexport async function updateItineraryAction(userId: string, itineraryId: string, updatedItineraryData: Partial<ItineraryData>): Promise<{ success: boolean; error?: string }> {\n  try {\n    await updateItineraryForUser(userId, itineraryId, updatedItineraryData);\n    return { success: true };\n  } catch (e) {\n    return { success: false, error: e instanceof Error ? e.message : \"An unknown error occurred while updating the itinerary.\" };\n  }\n}"],"names":[],"mappings":";;;;;;AAEA;AAEA;;;;;;AAGA,MAAM,eAAe;IACnB;IACA;IACA;IACA;IACA;CACD;AAED,SAAS;IACP,OAAO,YAAY,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,aAAa,MAAM,EAAE;AACtE;AAEO,eAAe,uCAAwB,GAAxB,2BACpB,KAA+B,AAAC,mCAAmC;;IAEnE,IAAI;QACF,sGAAsG;QACtG,MAAM,UAA4B;YAChC,aAAa,MAAM,WAAW;YAC9B,aAAa,MAAM,WAAW;YAC9B,WAAW,MAAM,SAAS;YAC1B,WAAW,MAAM,SAAS;YAC1B,SAAS,MAAM,SAAS,GAAG,YAAY,MAAM,OAAO;YACpD,WAAW,MAAM,SAAS;QAC5B;QAEA,MAAM,SAAkC,MAAM,CAAA,GAAA,6IAAA,CAAA,oBAAiB,AAAD,EAAE;QAEhE,IAAI,OAAO,SAAS,IAAI,OAAO,kBAAkB,EAAE;YACjD,MAAM,gBAA+B;gBACnC,IAAI,IAAI,OAAO,WAAW;gBAC1B,aAAa,MAAM,WAAW;gBAC9B,aAAa,MAAM,WAAW;gBAC9B,WAAW,OAAO,SAAS;gBAC3B,SAAS;gBACT,WAAW,IAAI,OAAO,WAAW;gBACjC,WAAW,MAAM,SAAS;gBAC1B,WAAW,MAAM,SAAS;gBAC1B,SAAS,MAAM,SAAS,GAAG,YAAY,MAAM,OAAO;gBACpD,WAAW,MAAM,SAAS;gBAC1B,oBAAoB,OAAO,kBAAkB;YAC/C;YACA,OAAO;gBAAE,MAAM;YAAc;QAC/B;QACA,OAAO;YAAE,OAAO;QAA+D;IACjF,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,eAAe,aAAa,QAAQ,EAAE,OAAO,GAAG;QACtD,OAAO;YAAE,OAAO;QAAa;IAC/B;AACF;AAEO,eAAe,uCAAmB,GAAnB,sBAAsB,MAAc,EAAE,WAAmB,EAAE,oBAA4C;IAC3H,IAAI;QACF,MAAM,CAAA,GAAA,mIAAA,CAAA,yBAAsB,AAAD,EAAE,QAAQ,aAAa;QAClD,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,GAAG;QACV,OAAO;YAAE,SAAS;YAAO,OAAO,aAAa,QAAQ,EAAE,OAAO,GAAG;QAA0D;IAC7H;AACF;;;IA/CsB;IAwCA;;AAxCA,+OAAA;AAwCA,+OAAA","debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","debugId":null}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgQ,GAC7R,8BACA","debugId":null}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}